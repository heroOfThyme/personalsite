---
import { Icon } from 'astro-icon/components';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Headline from '~/components/ui/Headline.astro';

export interface Skill {
  name: string;
  icon?: string;
  level?: string;
  color?: string;
}

export interface SkillCategory {
  name: string;
  skills: Skill[];
}

export interface Props {
  title?: string;
  subtitle?: string;
  categories: SkillCategory[];
  id?: string;
  bg?: string;
  classes?: Record<string, string>;
}

const {
  title = "My Skills",
  subtitle = "Technologies and tools I work with",
  categories = [],
  id,
  bg = await Astro.slots.render('bg'),
  classes = {},
} = Astro.props;

// Default colors for skill levels
const levelColors = {
  Beginner: 'bg-blue-100 text-blue-800',
  Intermediate: 'bg-green-100 text-green-800',
  Advanced: 'bg-purple-100 text-purple-800',
  Expert: 'bg-red-100 text-red-800',
};
---

<WidgetWrapper id={id} containerClass={classes?.container ?? 'max-w-6xl'} bg={bg}>
  <Headline
    title={title}
    subtitle={subtitle}
    classes={{
      container: 'mb-12 md:mb-16 text-center max-w-3xl mx-auto',
    }}
  />
  
  <div class="grid gap-8">
    {categories.map(category => (
      <div class="bg-white dark:bg-slate-900 rounded-lg shadow-md p-6">
        <h3 class="text-xl font-bold mb-4">{category.name}</h3>
        <div class="flex flex-wrap gap-3">
          {category.skills.map(skill => (
            <div class="flex items-center bg-gray-100 dark:bg-slate-800 rounded-full px-4 py-2">
              {skill.icon && <Icon name={skill.icon} class="w-5 h-5 mr-2" />}
              <span class="font-medium">{skill.name}</span>
              {skill.level && (
                <span class={`ml-2 text-xs px-2 py-1 rounded-full ${skill.color || levelColors[skill.level]}`}>
                  {skill.level}
                </span>
              )}
            </div>
          ))}
        </div>
      </div>
    ))}
  </div>
</WidgetWrapper>